
#include "../Internal.h"
#include <Base/RefObject.h>

namespace Lumino
{

//=============================================================================
// RefObject
//=============================================================================

//-----------------------------------------------------------------------------
//
//-----------------------------------------------------------------------------
RefObject::RefObject()
	: mReferenceCount(1)
{}

//-----------------------------------------------------------------------------
//
//-----------------------------------------------------------------------------
RefObject::~RefObject()
{
}

//-----------------------------------------------------------------------------
//
//-----------------------------------------------------------------------------
int32_t RefObject::GetRefCount() const
{ 
	return mReferenceCount.Get();
}

//-----------------------------------------------------------------------------
//
//-----------------------------------------------------------------------------
int32_t RefObject::AddRef()
{
	return mReferenceCount.Increment();
}

//-----------------------------------------------------------------------------
//
//-----------------------------------------------------------------------------
int32_t RefObject::Release()
{
    int32_t count = mReferenceCount.Decrement();
	if ( count <= 0 ) {
		 delete this;
	}
    return count;
}

} // namespace Lumino
